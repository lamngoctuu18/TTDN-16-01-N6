<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Zoom Integration Form View -->
        <record id="view_zoom_integration_form" model="ir.ui.view">
            <field name="name">zoom.integration.form</field>
            <field name="model">zoom.integration</field>
            <field name="arch" type="xml">
                <form string="C·∫•u h√¨nh Zoom">
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group>
                            <group string="Th√¥ng tin x√°c th·ª±c Zoom (Server-to-Server OAuth)">
                                <field name="account_id"/>
                                <field name="client_id"/>
                                <field name="client_secret" password="True"/>
                            </group>
                            <group string="Tr·∫°ng th√°i">
                                <field name="is_active"/>
                                <field name="access_token" password="True" readonly="1"/>
                                <field name="token_expiry" readonly="1"/>
                            </group>
                        </group>
                        <div class="alert alert-info" role="alert">
                            <strong>H∆∞·ªõng d·∫´n:</strong>
                            <ol>
                                <li>Truy c·∫≠p <a href="https://marketplace.zoom.us/" target="_blank">Zoom Marketplace</a></li>
                                <li>T·∫°o ·ª©ng d·ª•ng "Server-to-Server OAuth"</li>
                                <li>Sao ch√©p Account ID, Client ID, Client Secret v√†o ƒë√¢y</li>
                                <li>C·∫•p quy·ªÅn "meeting:write" cho ·ª©ng d·ª•ng</li>
                            </ol>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Zoom Integration Tree View -->
        <record id="view_zoom_integration_tree" model="ir.ui.view">
            <field name="name">zoom.integration.tree</field>
            <field name="model">zoom.integration</field>
            <field name="arch" type="xml">
                <tree string="C·∫•u h√¨nh Zoom">
                    <field name="name"/>
                    <field name="account_id"/>
                    <field name="is_active"/>
                    <field name="token_expiry"/>
                </tree>
            </field>
        </record>

        <!-- Zoom Integration Action -->
        <record id="action_zoom_integration" model="ir.actions.act_window">
            <field name="name">C·∫•u h√¨nh Zoom</field>
            <field name="res_model">zoom.integration</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    C·∫•u h√¨nh t√≠ch h·ª£p Zoom API
                </p>
                <p>
                    Thi·∫øt l·∫≠p th√¥ng tin x√°c th·ª±c Zoom Server-to-Server OAuth ƒë·ªÉ t·ª± ƒë·ªông t·∫°o ph√≤ng h·ªçp Zoom.
                </p>
            </field>
        </record>

        <!-- Google Calendar Integration Form View -->
        <record id="view_google_calendar_integration_form" model="ir.ui.view">
            <field name="name">google.calendar.integration.form</field>
            <field name="model">google.calendar.integration</field>
            <field name="arch" type="xml">
                <form string="C·∫•u h√¨nh Google Calendar">
                    <header>
                        <button name="action_open_authorization_url" string="üîê Authorize Google" type="object" class="oe_highlight" help="M·ªü URL ƒë·ªÉ authorize Google Calendar v√† l·∫•y tokens"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group>
                            <group string="Th√¥ng tin x√°c th·ª±c Google (OAuth 2.0)">
                                <field name="client_id"/>
                                <field name="client_secret" password="True"/>
                                <field name="redirect_uri" readonly="1"/>
                                <field name="refresh_token" password="True" readonly="1"/>
                                <field name="calendar_id" placeholder="primary"/>
                            </group>
                            <group string="Tr·∫°ng th√°i">
                                <field name="is_active"/>
                                <field name="access_token" password="True" readonly="1"/>
                                <field name="token_expiry" readonly="1"/>
                            </group>
                        </group>
                        <div class="alert alert-warning" role="alert" attrs="{'invisible': [('refresh_token', '!=', False)]}">
                            <strong>‚ö†Ô∏è CH∆ØA C√ì REFRESH TOKEN!</strong><br/>
                            Vui l√≤ng b·∫•m n√∫t <strong>"üîê Authorize Google"</strong> ·ªü tr√™n ƒë·ªÉ ho√†n t·∫•t OAuth flow v√† l·∫•y tokens.
                        </div>
                        <div class="alert alert-success" role="alert" attrs="{'invisible': [('refresh_token', '=', False)]}">
                            <strong>‚úÖ ƒê√É AUTHORIZE TH√ÄNH C√îNG!</strong><br/>
                            Google Calendar integration ƒë√£ s·∫µn s√†ng s·ª≠ d·ª•ng.
                        </div>
                        <div class="alert alert-info" role="alert">
                            <strong>H∆∞·ªõng d·∫´n OAuth Setup (QUAN TR·ªåNG):</strong>
                            <ol>
                                <li><strong>Google Cloud Console Setup:</strong>
                                    <ul>
                                        <li>V√†o <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></li>
                                        <li>APIs &amp; Services ‚Üí Credentials ‚Üí CREATE CREDENTIALS ‚Üí OAuth 2.0 Client ID</li>
                                        <li>Application type: <strong>Web application</strong></li>
                                        <li>Authorized redirect URIs: <strong><code>http://localhost:8069/google_calendar/callback</code></strong> (PH·∫¢I GI·ªêNG 100%)</li>
                                        <li>Enable Google Calendar API trong Library</li>
                                    </ul>
                                </li>
                                <li><strong>L·∫•y Tokens:</strong>
                                    <ul>
                                        <li>Thay YOUR_CLIENT_ID trong URL sau:</li>
                                        <li><code>https://accounts.google.com/o/oauth2/v2/auth?client_id=YOUR_CLIENT_ID&amp;redirect_uri=http://localhost:8069/google_calendar/callback&amp;scope=https://www.googleapis.com/auth/calendar&amp;response_type=code&amp;access_type=offline&amp;prompt=consent</code></li>
                                        <li>‚ö†Ô∏è <strong>B·∫ÆT BU·ªòC</strong> c√≥ <code>access_type=offline</code> v√† <code>prompt=consent</code> ƒë·ªÉ nh·∫≠n refresh_token</li>
                                        <li>User authorize ‚Üí redirect v·ªÅ Odoo ‚Üí tokens t·ª± ƒë·ªông l∆∞u</li>
                                    </ul>
                                </li>
                                <li><strong>L∆∞u √Ω:</strong> Google CH·ªà tr·∫£ refresh_token l·∫ßn ƒë·∫ßu authorize v·ªõi access_type=offline</li>
                            </ol>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Google Calendar Integration Tree View -->
        <record id="view_google_calendar_integration_tree" model="ir.ui.view">
            <field name="name">google.calendar.integration.tree</field>
            <field name="model">google.calendar.integration</field>
            <field name="arch" type="xml">
                <tree string="C·∫•u h√¨nh Google Calendar">
                    <field name="name"/>
                    <field name="calendar_id"/>
                    <field name="is_active"/>
                    <field name="token_expiry"/>
                </tree>
            </field>
        </record>

        <!-- Google Calendar Integration Action -->
        <record id="action_google_calendar_integration" model="ir.actions.act_window">
            <field name="name">C·∫•u h√¨nh Google Calendar</field>
            <field name="res_model">google.calendar.integration</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    C·∫•u h√¨nh t√≠ch h·ª£p Google Calendar API
                </p>
                <p>
                    Thi·∫øt l·∫≠p th√¥ng tin x√°c th·ª±c Google OAuth 2.0 ƒë·ªÉ t·ª± ƒë·ªông ƒë·ªìng b·ªô l·ªãch h·ªçp l√™n Google Calendar.
                </p>
            </field>
        </record>

    </data>
</odoo>
