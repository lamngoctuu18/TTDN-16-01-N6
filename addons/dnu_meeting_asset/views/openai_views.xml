<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ===================== OpenAI Configuration Views ===================== -->
    
    <!-- Form View -->
    <record id="view_openai_configuration_form" model="ir.ui.view">
        <field name="name">openai.configuration.form</field>
        <field name="model">openai.configuration</field>
        <field name="arch" type="xml">
            <form string="C·∫•u h√¨nh OpenAI">
                <header>
                    <button name="test_connection" 
                            type="object" 
                            string="üîó Ki·ªÉm tra k·∫øt n·ªëi" 
                            class="btn-primary"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="object" name="test_connection" icon="fa-check-circle">
                            <span>Test API</span>
                        </button>
                    </div>
                    <widget name="web_ribbon" title="M·∫∑c ƒë·ªãnh" bg_color="bg-success" attrs="{'invisible': [('is_default', '=', False)]}"/>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="T√™n c·∫•u h√¨nh"/>
                        </h1>
                    </div>
                    <group>
                        <group string="üîë X√°c th·ª±c API">
                            <field name="api_key" password="True" placeholder="sk-proj-..."/>
                            <field name="model_name"/>
                            <field name="is_default"/>
                            <field name="active"/>
                        </group>
                        <group string="‚öôÔ∏è Tham s·ªë">
                            <field name="max_tokens"/>
                            <field name="temperature" widget="float"/>
                        </group>
                    </group>
                    <group>
                        <group string="üìä Th·ªëng k√™ s·ª≠ d·ª•ng">
                            <field name="total_requests"/>
                            <field name="total_tokens_used"/>
                            <field name="last_used"/>
                        </group>
                        <group string="üî¥ Tr·∫°ng th√°i">
                            <field name="status" widget="badge" 
                                   decoration-success="status == 'active'"
                                   decoration-danger="status == 'error'"
                                   decoration-warning="status == 'quota_exceeded'"/>
                            <field name="last_error" attrs="{'invisible': [('last_error', '=', False)]}"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="üìñ H∆∞·ªõng d·∫´n">
                            <div class="alert alert-info" role="alert">
                                <h4><i class="fa fa-info-circle"/> C√°ch l·∫•y API Key OpenAI</h4>
                                <ol>
                                    <li>Truy c·∫≠p <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a></li>
                                    <li>ƒêƒÉng nh·∫≠p ho·∫∑c t·∫°o t√†i kho·∫£n OpenAI</li>
                                    <li>Click "Create new secret key"</li>
                                    <li>Copy key v√† d√°n v√†o tr∆∞·ªùng API Key ·ªü tr√™n</li>
                                    <li>B·∫•m "Ki·ªÉm tra k·∫øt n·ªëi" ƒë·ªÉ x√°c nh·∫≠n</li>
                                </ol>
                                <hr/>
                                <h5><i class="fa fa-lightbulb-o"/> L∆∞u √Ω v·ªÅ Model</h5>
                                <ul>
                                    <li><b>GPT-4o Mini:</b> Nhanh, ti·∫øt ki·ªám chi ph√≠ - ph√π h·ª£p cho h·∫ßu h·∫øt t√°c v·ª•</li>
                                    <li><b>GPT-4o:</b> M·∫°nh m·∫Ω nh·∫•t, ph√π h·ª£p cho ph√¢n t√≠ch ph·ª©c t·∫°p</li>
                                    <li><b>GPT-4 Turbo:</b> C√¢n b·∫±ng gi·ªØa t·ªëc ƒë·ªô v√† ch·∫•t l∆∞·ª£ng</li>
                                    <li><b>GPT-3.5 Turbo:</b> R·∫ª nh·∫•t, ph√π h·ª£p cho t√°c v·ª• ƒë∆°n gi·∫£n</li>
                                </ul>
                            </div>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Tree View -->
    <record id="view_openai_configuration_tree" model="ir.ui.view">
        <field name="name">openai.configuration.tree</field>
        <field name="model">openai.configuration</field>
        <field name="arch" type="xml">
            <tree string="C·∫•u h√¨nh OpenAI">
                <field name="name"/>
                <field name="model_name"/>
                <field name="status" widget="badge" 
                       decoration-success="status == 'active'"
                       decoration-danger="status == 'error'"
                       decoration-warning="status == 'quota_exceeded'"/>
                <field name="is_default"/>
                <field name="total_requests"/>
                <field name="total_tokens_used"/>
                <field name="last_used"/>
                <field name="active"/>
            </tree>
        </field>
    </record>

    <!-- Action -->
    <record id="action_openai_configuration" model="ir.actions.act_window">
        <field name="name">C·∫•u h√¨nh OpenAI</field>
        <field name="res_model">openai.configuration</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                C·∫•u h√¨nh OpenAI API ƒë·ªÉ s·ª≠ d·ª•ng t√≠nh nƒÉng AI
            </p>
            <p>
                Th√™m API Key t·ª´ OpenAI ƒë·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng AI nh∆∞:
                <ul>
                    <li>H·ªèi ƒë√°p v·ªÅ t√†i s·∫£n</li>
                    <li>T·∫°o bi√™n b·∫£n cu·ªôc h·ªçp</li>
                    <li>G·ª£i √Ω th·ªùi gian h·ªçp</li>
                    <li>Ph√¢n t√≠ch r·ªßi ro t√†i s·∫£n</li>
                </ul>
            </p>
        </field>
    </record>
    
    <!-- ===================== AI Wizard Views ===================== -->
    
    <!-- AI Asset Wizard Form -->
    <record id="view_ai_asset_wizard_form" model="ir.ui.view">
        <field name="name">ai.asset.wizard.form</field>
        <field name="model">ai.asset.wizard</field>
        <field name="arch" type="xml">
            <form string="ü§ñ Tr·ª£ l√Ω AI - T√†i s·∫£n">
                <group>
                    <field name="action_type" widget="radio" options="{'horizontal': true}"/>
                </group>
                <group attrs="{'invisible': [('action_type', '!=', 'qa')]}">
                    <field name="question" placeholder="V√≠ d·ª•: Laptop Dell n√†o c√≤n b·∫£o h√†nh? Ai ƒëang gi·ªØ m√°y chi·∫øu?"/>
                    <field name="asset_ids" widget="many2many_tags" 
                           placeholder="ƒê·ªÉ tr·ªëng = t√¨m ki·∫øm t·∫•t c·∫£ t√†i s·∫£n"/>
                </group>
                <group attrs="{'invisible': [('action_type', '!=', 'maintenance')]}">
                    <field name="asset_id" options="{'no_create': True}"/>
                </group>
                <group attrs="{'invisible': [('action_type', '!=', 'risk')]}">
                    <field name="asset_ids" widget="many2many_tags" 
                           placeholder="ƒê·ªÉ tr·ªëng = ph√¢n t√≠ch t·∫•t c·∫£ t√†i s·∫£n"/>
                </group>
                <div attrs="{'invisible': [('show_result', '=', False)]}" class="mt-3">
                    <field name="result" readonly="1"/>
                </div>
                <field name="show_result" invisible="1"/>
                <footer>
                    <button name="action_execute" type="object" string="üöÄ Th·ª±c hi·ªán" class="btn-primary"/>
                    <button string="ƒê√≥ng" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- AI Meeting Wizard Form -->
    <record id="view_ai_meeting_wizard_form" model="ir.ui.view">
        <field name="name">ai.meeting.wizard.form</field>
        <field name="model">ai.meeting.wizard</field>
        <field name="arch" type="xml">
            <form string="ü§ñ Tr·ª£ l√Ω AI - Ph√≤ng h·ªçp">
                <group>
                    <field name="action_type" widget="radio" options="{'horizontal': true}"/>
                </group>
                
                <!-- Summary -->
                <group attrs="{'invisible': [('action_type', '!=', 'summary')]}" string="T·∫°o bi√™n b·∫£n h·ªçp">
                    <field name="booking_id" domain="[('state', 'in', ['done', 'in_progress', 'confirmed'])]"/>
                    <field name="meeting_notes" placeholder="Ghi ch√∫ n·ªôi dung cu·ªôc h·ªçp ƒë·ªÉ t·∫°o bi√™n b·∫£n chi ti·∫øt h∆°n..."/>
                </group>
                
                <!-- Schedule -->
                <group attrs="{'invisible': [('action_type', '!=', 'schedule')]}" string="G·ª£i √Ω th·ªùi gian h·ªçp">
                    <field name="attendee_ids" widget="many2many_tags"/>
                    <field name="duration_hours"/>
                    <field name="preferred_date"/>
                </group>
                
                <!-- Agenda -->
                <group attrs="{'invisible': [('action_type', '!=', 'agenda')]}" string="T·∫°o agenda cu·ªôc h·ªçp">
                    <field name="meeting_subject" placeholder="V√≠ d·ª•: H·ªçp review d·ª± √°n Q1"/>
                    <field name="meeting_description" placeholder="M√¥ t·∫£ th√™m v·ªÅ cu·ªôc h·ªçp..."/>
                    <field name="duration_hours"/>
                </group>
                
                <!-- Chat -->
                <group attrs="{'invisible': [('action_type', '!=', 'chat')]}" string="Chat v·ªõi AI">
                    <field name="chat_message" placeholder="H·ªèi b·∫•t c·ª© ƒëi·ªÅu g√¨ v·ªÅ ph√≤ng h·ªçp, ƒë·∫∑t l·ªãch, quy tr√¨nh..."/>
                </group>
                
                <div attrs="{'invisible': [('show_result', '=', False)]}" class="mt-3">
                    <field name="result" readonly="1"/>
                </div>
                <field name="show_result" invisible="1"/>
                <footer>
                    <button name="action_execute" type="object" string="üöÄ Th·ª±c hi·ªán" class="btn-primary"/>
                    <button string="ƒê√≥ng" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- AI HR Wizard Form -->
    <record id="view_ai_hr_wizard_form" model="ir.ui.view">
        <field name="name">ai.hr.wizard.form</field>
        <field name="model">ai.hr.wizard</field>
        <field name="arch" type="xml">
            <form string="üë• AI Nh√¢n s·ª±">
                <group>
                    <field name="action_type" widget="radio" options="{'horizontal': true}"/>
                </group>
                
                <group attrs="{'invisible': [('action_type', '!=', 'chat')]}">
                    <field name="message" placeholder="H·ªèi v·ªÅ nh√¢n vi√™n, ph√≤ng ban, ch·ª©c v·ª•..." nolabel="1"/>
                </group>
                
                <group attrs="{'invisible': [('action_type', '!=', 'department_analysis')]}">
                    <field name="department_id"/>
                </group>
                
                <group attrs="{'invisible': [('action_type', '!=', 'employee_search')]}">
                    <field name="search_criteria"/>
                </group>
                
                <div attrs="{'invisible': [('show_result', '=', False)]}" class="mt-3">
                    <field name="result" readonly="1" nolabel="1"/>
                </div>
                <field name="show_result" invisible="1"/>
                <footer>
                    <button name="action_execute" type="object" string="üöÄ Th·ª±c hi·ªán" class="btn-primary"/>
                    <button string="ƒê√≥ng" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- Actions for Wizards -->
    <record id="action_ai_asset_wizard" model="ir.actions.act_window">
        <field name="name">ü§ñ AI Tr·ª£ l√Ω T√†i s·∫£n</field>
        <field name="res_model">ai.asset.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    
    <record id="action_ai_meeting_wizard" model="ir.actions.act_window">
        <field name="name">ü§ñ AI Tr·ª£ l√Ω Ph√≤ng h·ªçp</field>
        <field name="res_model">ai.meeting.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    
    <record id="action_ai_hr_wizard" model="ir.actions.act_window">
        <field name="name">üë• AI Tr·ª£ l√Ω Nh√¢n s·ª±</field>
        <field name="res_model">ai.hr.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
</odoo>
