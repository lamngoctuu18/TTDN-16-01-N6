<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Template hiển thị khi OAuth thành công -->
        <template id="google_auth_success" name="Google Authorization Success">
            <html>
                <head>
                    <meta charset="UTF-8"/>
                    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <title>Authorization Successful</title>
                    <style>
                        body {
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            min-height: 100vh;
                            margin: 0;
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        }
                        .container {
                            background: white;
                            border-radius: 10px;
                            padding: 40px;
                            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                            text-align: center;
                            max-width: 500px;
                        }
                        .success-icon {
                            font-size: 64px;
                            margin-bottom: 20px;
                        }
                        h1 {
                            color: #10b981;
                            margin: 0 0 10px 0;
                        }
                        p {
                            color: #6b7280;
                            line-height: 1.6;
                            margin: 20px 0;
                        }
                        .config-name {
                            background: #f3f4f6;
                            padding: 10px;
                            border-radius: 5px;
                            font-weight: bold;
                            color: #374151;
                            margin: 20px 0;
                        }
                        .btn {
                            display: inline-block;
                            background: #667eea;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 5px;
                            text-decoration: none;
                            margin-top: 20px;
                            transition: background 0.3s;
                        }
                        .btn:hover {
                            background: #764ba2;
                        }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <div class="success-icon">✅</div>
                        <h1>Xác thực thành công!</h1>
                        <p>Google Calendar đã được kết nối với Odoo.</p>
                        <div class="config-name">
                            <t t-esc="config_name or 'Google Calendar DNU'"/>
                        </div>
                        <p>Refresh Token và Access Token đã được lưu vào database.<br/>
                        Bạn có thể đóng cửa sổ này và quay lại Odoo.</p>
                        <a href="/web" class="btn">Quay lại Odoo</a>
                    </div>
                </body>
            </html>
        </template>

        <!-- Template hiển thị khi OAuth lỗi -->
        <template id="google_auth_error" name="Google Authorization Error">
            <html>
                <head>
                    <meta charset="UTF-8"/>
                    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <title>Authorization Failed</title>
                    <style>
                        body {
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            min-height: 100vh;
                            margin: 0;
                            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                        }
                        .container {
                            background: white;
                            border-radius: 10px;
                            padding: 40px;
                            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                            text-align: center;
                            max-width: 500px;
                        }
                        .error-icon {
                            font-size: 64px;
                            margin-bottom: 20px;
                        }
                        h1 {
                            color: #ef4444;
                            margin: 0 0 10px 0;
                        }
                        p {
                            color: #6b7280;
                            line-height: 1.6;
                            margin: 20px 0;
                        }
                        .error-details {
                            background: #fef2f2;
                            padding: 15px;
                            border-left: 4px solid #ef4444;
                            border-radius: 5px;
                            margin: 20px 0;
                            text-align: left;
                        }
                        .error-code {
                            font-weight: bold;
                            color: #991b1b;
                        }
                        .error-description {
                            color: #7f1d1d;
                            margin-top: 5px;
                            font-size: 14px;
                        }
                        .btn {
                            display: inline-block;
                            background: #667eea;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 5px;
                            text-decoration: none;
                            margin-top: 20px;
                            transition: background 0.3s;
                        }
                        .btn:hover {
                            background: #764ba2;
                        }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <div class="error-icon">❌</div>
                        <h1>Xác thực thất bại</h1>
                        <p>Không thể kết nối Google Calendar với Odoo.</p>
                        <div class="error-details">
                            <div class="error-code">
                                Lỗi: <t t-esc="error or 'unknown'"/>
                            </div>
                            <div class="error-description">
                                <t t-esc="error_description or 'No description available'"/>
                            </div>
                        </div>
                        <p>Vui lòng kiểm tra lại cấu hình trong Google Cloud Console:<br/>
                        - Client ID và Client Secret đúng chưa?<br/>
                        - Redirect URI đã thêm vào Authorized redirect URIs?<br/>
                        - Google Calendar API đã enable?</p>
                        <a href="/web" class="btn">Quay lại Odoo</a>
                    </div>
                </body>
            </html>
        </template>

    </data>
</odoo>
