<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Quick Booking Wizard Form -->
        <record id="view_quick_booking_wizard_form" model="ir.ui.view">
            <field name="name">dnu.quick.booking.wizard.form</field>
            <field name="model">dnu.quick.booking.wizard</field>
            <field name="arch" type="xml">
                <form string="Đặt phòng nhanh">
                    <group>
                        <group string="Thông tin cuộc họp">
                            <field name="subject" placeholder="Ví dụ: Họp giao ban tuần"/>
                            <field name="organizer_id" options="{'no_quick_create': True}" context="{'form_view_ref': 'hr.view_employee_form'}"/>
                        </group>
                        <group string="Thời gian">
                            <field name="date"/>
                            <field name="start_time" widget="float_time"/>
                            <field name="duration" widget="float_time"/>
                        </group>
                    </group>
                    <group>
                        <group string="Yêu cầu">
                            <field name="num_attendees"/>
                        </group>
                        <group string="Tiện nghi cần thiết">
                            <field name="need_projector"/>
                            <field name="need_video_conference"/>
                            <field name="need_whiteboard"/>
                        </group>
                    </group>
                    
                    <group string="Loại cuộc họp">
                        <field name="meeting_type" widget="radio"/>
                    </group>
                    
                    <group string="Tích hợp (chỉ cho họp online)" attrs="{'invisible': [('meeting_type', '!=', 'online')]}">
                        <field name="create_zoom_meeting"/>
                        <field name="sync_google_calendar"/>
                    </group>
                    
                    <separator string="Phòng gợi ý"/>
                    <field name="message" readonly="1" nolabel="1"/>
                    
                    <field name="start_datetime" invisible="1"/>
                    <field name="end_datetime" invisible="1"/>
                    
                    <group>
                        <field name="suggested_room_ids" readonly="1" nolabel="1">
                            <tree>
                                <field name="name"/>
                                <field name="capacity"/>
                                <field name="location"/>
                            </tree>
                        </field>
                    </group>
                    
                    <group>
                        <field name="selected_room_id" 
                               domain="[('id', 'in', suggested_room_ids)]" 
                               options="{'no_create': True, 'no_quick_create': True}"
                               context="{'tree_view_ref': 'dnu_meeting_asset.view_meeting_room_tree'}"/>
                    </group>
                    
                    <group string="Mô tả cuộc họp">
                        <field name="description" nolabel="1" placeholder="Mô tả chi tiết về cuộc họp (tùy chọn)..."/>
                    </group>
                    
                    <footer>
                        <button name="action_book" string="Đặt phòng" type="object" class="btn-primary" attrs="{'invisible': [('selected_room_id', '=', False)]}"/>
                        <button name="action_view_calendar" string="Xem lịch" type="object" class="btn-secondary"/>
                        <button string="Hủy" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Action for Quick Booking Wizard -->
        <record id="action_quick_booking_wizard" model="ir.actions.act_window">
            <field name="name">Đặt phòng nhanh</field>
            <field name="res_model">dnu.quick.booking.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <!-- Asset Return Wizard Form -->
        <record id="view_asset_return_wizard_form" model="ir.ui.view">
            <field name="name">dnu.asset.return.wizard.form</field>
            <field name="model">dnu.asset.return.wizard</field>
            <field name="arch" type="xml">
                <form string="Trả tài sản">
                    <group>
                        <group>
                            <field name="lending_id" readonly="1"/>
                            <field name="asset_id"/>
                            <field name="borrower_id"/>
                        </group>
                        <group>
                            <field name="return_condition" required="1"/>
                            <field name="create_maintenance"/>
                        </group>
                    </group>
                    <group attrs="{'invisible': [('create_maintenance', '=', False)]}">
                        <field name="maintenance_description" placeholder="Mô tả chi tiết về hư hỏng..." attrs="{'required': [('create_maintenance', '=', True)]}"/>
                    </group>
                    <group>
                        <field name="return_notes" placeholder="Ghi chú khi trả..."/>
                    </group>
                    <footer>
                        <button name="action_return" string="Xác nhận trả" type="object" class="btn-primary"/>
                        <button string="Hủy" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- ============================================= -->
        <!-- SIGNATURE WIZARD                              -->
        <!-- ============================================= -->
        
        <record id="view_asset_signature_wizard_form" model="ir.ui.view">
            <field name="name">dnu.asset.signature.wizard.form</field>
            <field name="model">dnu.asset.signature.wizard</field>
            <field name="arch" type="xml">
                <form string="Chữ ký điện tử">
                    <sheet>
                        <div class="alert alert-warning" role="alert">
                            <strong>Xác nhận chữ ký điện tử</strong><br/>
                            Bằng việc ký vào biên bản này, bạn xác nhận đã nhận/giao tài sản và đồng ý với các điều khoản bàn giao.
                        </div>
                        
                        <group>
                            <field name="handover_id" invisible="1"/>
                            <field name="signature_type" readonly="1"/>
                            
                            <field name="signature" widget="image" options="{'size': [400, 200]}" 
                                   class="oe_avatar" nolabel="1"/>
                            
                            <div class="alert alert-info" role="alert">
                                <i class="fa fa-info-circle"/> Bạn có thể vẽ chữ ký trực tiếp hoặc tải lên hình ảnh chữ ký.
                            </div>
                            
                            <field name="confirm_text" placeholder="Nhập 'XÁC NHẬN' để xác nhận"/>
                            
                            <div class="alert alert-danger" role="alert">
                                <strong>Lưu ý quan trọng:</strong><br/>
                                - Chữ ký này có giá trị pháp lý<br/>
                                - Bạn chịu trách nhiệm về việc bàn giao tài sản<br/>
                                - Không thể thay đổi sau khi ký
                            </div>
                        </group>
                    </sheet>
                    <footer>
                        <button string="Xác nhận ký" name="action_sign" type="object" class="btn-primary"/>
                        <button string="Hủy" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

    </data>
</odoo>
